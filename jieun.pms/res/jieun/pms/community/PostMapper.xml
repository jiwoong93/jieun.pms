<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jieun.pms.community.dao.mapper.PostMapper">
	
	<select id="getPosts" parameterType="page" resultMap="postMap">
		<![CDATA[
		select * from(
		select rownum as rnum, x.* from(
			select * from reviews
			order by rev_no desc
		)x where rownum <=#{rowCnt}*#{currentPage}
		)where rnum>#{rowCnt}*(#{currentPage}-1)
		]]>
	</select>
	
	<select id="getReview" parameterType="page" resultMap="postMap">
		<![CDATA[
		select rev_no revNo, mem_id memId, item_no itemNo, rev_subject revSubject, rev_contents revContents, rev_view revView, rev_date regDate
		from reviews
		where rev_no = #{revNo}		
		]]>
	</select>
	
<<<<<<< HEAD
	<insert id="insertReview" parameterType="review">
		insert into reviews
		values(revno_seq.nextval,#{memId,jdbcType=VARCHAR} , #{itemNo,jdbcType=VARCHAR},sysdate,#{revFilename,jdbcType=VARCHAR},#{revSubject,jdbcType=VARCHAR},#{revContents,jdbcType=VARCHAR},0)
	</insert>
	
	<delete id="deleteProduct" parameterType="int">
		delete items
=======
	<update id="updateCount" parameterType="int">
		update reviews
		set rev_view = rev_view + 1
		where rev_no = #{revNo}
	</update>
	
	<insert id="insertReview" parameterType="post">
		insert into reviews
		values(revno_seq.nextval,#{memId,jdbcType=VARCHAR} , #{itemNo,jdbcType=VARCHAR},sysdate,#{revFilename,jdbcType=VARCHAR},#{revSubject,jdbcType=VARCHAR},#{revContents,jdbcType=VARCHAR},0)
	</insert>
	
	<delete id="deleteProduct" parameterType="int">
		delete reviews
>>>>>>> branch 'master' of https://github.com/jiwoong93/jieun.pms.git
		where rev_no = #{revNo}
	</delete>

	<resultMap id="postMap" type="post">
		<id property="revNo" column="rev_no" />
		<result property="revSubject" column="rev_subject" />
		<result property="revContents" column="rev_contents" />
		<result property="regDate" column="rev_date" />
		<result property="revView" column="rev_view" />
	</resultMap>
	
<<<<<<< HEAD
	<resultMap id="reviewMap" type="review">
		<id property="revNo" column="rev_no" />
		<result property="memId" column="rev_memid" />
		<result property="itemNo" column="rev_itemno" />
		<result property="revDate" column="rev_revdate" />
		<result property="revFilename" column="rev_revfilename" />
		<result property="revSubject" column="rev_revsubject" />
		<result property="revContents" column="rev_revcontents" />
		<result property="revView" column="rev_revview" />
	</resultMap>
=======
	<!-- <resultMap id="reviewMap" type="post">
		<id property="revNo" column="rev_no" />
		<result property="memId" column="mem_id" />
		<result property="itemNo" column="item_no" />
		<result property="revDate" column="rev_date" />
		<result property="revFilename" column="rev_filename" />
		<result property="revSubject" column="rev_subject" />
		<result property="revContents" column="rev_contents" />
		<result property="revView" column="rev_view" />
	</resultMap> -->
>>>>>>> branch 'master' of https://github.com/jiwoong93/jieun.pms.git
</mapper>
